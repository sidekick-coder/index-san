import{_ as F}from"./VCheckbox.vue.c72cbf32.js";import{_ as T}from"./VTh.vue.b4546af7.js";import{_ as L}from"./VTr.vue.4eaba092.js";import{_ as U}from"./VTd.vue.73b39b38.js";import{u as G}from"./uniq.ed3f8393.js";import{t as M}from"./utils.5590a87e.js";import{u as H}from"./v-model.33915231.js";import{a as J,q as O,b as N,o as u,f as V,j as E,r as _,u as t,F as B,I as x,c as b,e as c,h as $,D as A,C as S,i as D,k as j,p as P,l as w}from"./entry.9864e5b4.js";import"./VIcon.d3ba8c2e.js";import"./use-variant.f8589428.js";import"./_createSet.188a6b63.js";import"./_MapCache.ee679fd0.js";import"./isObject.9206ef88.js";import"./_commonjsHelpers.726de751.js";const ie=J({__name:"VTable",props:{modelValue:{type:Array,default:null},items:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]},limit:{type:[Number,String],default:20},loading:{type:Boolean,default:!1},fixed:{type:Boolean,default:!0},headerStick:{type:Boolean,default:!1},itemKey:{type:String,default:null}},emits:["update:modelValue"],setup(g,{emit:q}){const d=g,I=O({page:1}),m=N(()=>{const l=d.columns.map(r=>{const a={};return r.width&&(a.width=M(r.width)),{...r,style:a}});return n.value&&l.unshift({id:"select",name:"select",label:"",style:{width:M(40)}}),l}),y=N(()=>d.items.slice(0,I.value.page*+d.limit));function p(l,r){return d.itemKey?l[d.itemKey]:r}const n=H(d,"modelValue",q);function K(l,r,a){if(!n.value)return;a&&a.preventDefault();const h=p(l,r);if(!(a!=null&&a.ctrlKey)&&!(a!=null&&a.shiftKey)){n.value=[h];return}if(a.ctrlKey&&n.value.includes(h)){n.value=n.value.filter(i=>i!==h);return}if(a.ctrlKey){n.value=G([...n.value,h]);return}if(!n.value.length)return;const k=n.value[0],v=d.items.findIndex((i,f)=>p(i,f)===k),C=d.items.findIndex((i,f)=>p(i,f)===h),e=Math.min(v,C),o=Math.max(v,C),s=[];d.items.forEach((i,f)=>{f>=e&&f<=o&&s.push(p(i,f))}),n.value=s}function z(){const l=[];y.value.forEach((r,a)=>{l.push(p(r,a))}),n.value=l}return(l,r)=>{const a=F,h=T,k=L,v=U,C=P("fa-icon");return u(),V("table",{class:j(["w-full border-lines border-spacing-0 relative",[g.fixed?"table-fixed":"",g.loading?"animate-pulse":""]])},[E("thead",null,[_(l.$slots,"column",{columns:t(m)},()=>[$(k,{class:j([[g.headerStick?"sticky top-0":""],"bg-b-primary"])},{default:c(()=>[(u(!0),V(B,null,x(t(m),e=>_(l.$slots,"default",{key:`column-${e.name}`,attrs:{style:e.style}},()=>[e.name==="select"?(u(),b(h,{key:0,style:w(e.style),class:"text-t-secondary","no-padding":""},{default:c(()=>{var o;return[$(a,{class:"justify-center","model-value":((o=t(n))==null?void 0:o.length)===t(y).length,"onUpdate:modelValue":z},null,8,["model-value"])]}),_:2},1032,["style"])):(u(),b(h,{key:1,style:w(e.style),class:"text-t-secondary"},{default:c(()=>[A(S(e.label),1)]),_:2},1032,["style"]))])),128))]),_:3},8,["class"])])]),(u(!0),V(B,null,x(t(y),(e,o)=>_(l.$slots,"item",{key:p(e,o),items:t(y),columns:t(m),item:e,index:o,isSelected:()=>{var s;return(s=t(n))==null?void 0:s.includes(p(e,o))},selectAttrs:{onClick:s=>K(e,o,s)},select:s=>K(e,o,s)},()=>[$(k,null,{default:c(()=>[(u(!0),V(B,null,x(t(m),s=>_(l.$slots,`item-${s.name}`,{item:e,column:s,index:o,attrs:{style:s.style}},()=>[s.name==="select"?(u(),b(v,{key:`${e.id}-select`,style:w(s.style)},{default:c(()=>{var i;return[$(a,{"model-value":(i=t(n))==null?void 0:i.includes(p(e,o)),onClick:f=>K(e,o,f)},null,8,["model-value","onClick"])]}),_:2},1032,["style"])):(u(),b(v,{key:`${e.id}-${s.name}`,style:w(s.style)},{default:c(()=>[A(S(s.field?e[s.field]:""),1)]),_:2},1032,["style"]))])),256))]),_:2},1024)])),128)),t(y).length?D("",!0):(u(),b(k,{key:0},{default:c(()=>[$(v,{colspan:t(m).length,class:"text-t-secondary text-sm text-center"},{default:c(()=>[A(S(l.$t("noEntity",[l.$t("item",2)])),1)]),_:1},8,["colspan"])]),_:1})),_(l.$slots,"pagination",{pagination:t(I),limit:g.limit,length:t(y).length,columns:t(m)},()=>[t(y).length<g.items.length?(u(),b(k,{key:0,class:"border-b border-lines"},{default:c(()=>[$(v,{colspan:t(m).length,class:"cursor-pointer hover:bg-b-secondary text-t-secondary text-sm border-r-0 text-center",onClick:r[0]||(r[0]=e=>t(I).page++)},{default:c(()=>[$(C,{icon:"arrow-down",class:"mr-2"}),E("span",null,S(`${l.$t("loadMore")} (${t(y).length}/${g.items.length})`),1)]),_:1},8,["colspan"])]),_:1})):D("",!0)]),_(l.$slots,"append",{columns:t(m)})],2)}}});export{ie as default};
