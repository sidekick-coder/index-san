import{_ as E}from"./VCard.vue.943faacc.js";import{_ as F}from"./VListItem.vue.bfa087af.js";import O from"./VIcon.d3ba8c2e.js";import G from"./VCardContent.fc31dfae.js";import{u as H}from"./uniq.ed3f8393.js";import{u as J}from"./index.56aaed30.js";import{c as L}from"./binding.db46501a.js";import{u as P}from"./v-model.33915231.js";import{a as T,H as Q,b as $,q as _,o as l,f as x,c as V,e as f,D as A,C as z,i as I,F as N,I as j,u as t,r as M,h as K,j as U,J as B}from"./entry.9864e5b4.js";import"./utils.5590a87e.js";import"./_createSet.188a6b63.js";import"./_MapCache.ee679fd0.js";import"./isObject.9206ef88.js";import"./_commonjsHelpers.726de751.js";const W={inheritAttrs:!1},me=T({...W,__name:"VGallery",props:{modelValue:{type:Array,default:null},items:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]},sizes:{type:Object,default:()=>({})},color:{type:String,default:"b-secondary"},limit:{type:[String,Number],default:20},loading:{type:Boolean,default:!1},itemKey:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:R}){const a=e,D=Q(),c=$(()=>L(D,["card"])),C=_(),y=_("md");J(C,o=>{const s=o[0],{width:n}=s.contentRect;n<640&&(y.value="sm"),n>640&&(y.value="md"),n>1024&&(y.value="lg")});const h=$(()=>({sm:{width:200,height:"auto"},md:{width:282,height:"auto"},lg:{width:200,height:"auto"},...a.sizes})[y.value]),S=_({page:1}),w=$(()=>a.items.slice(0,S.value.page*+a.limit));function g(o,s){return a.itemKey?o[a.itemKey]:s}const i=P(a,"modelValue",R);function q(o,s,n){if(!i.value)return;n.preventDefault();const u=g(o,s);if(!n.ctrlKey&&!n.shiftKey){i.value=[u];return}if(n.ctrlKey){i.value=H([...i.value,u]);return}if(!i.value.length)return;const b=i.value[0],p=a.items.findIndex(d=>g(d,s)===b),r=a.items.findIndex(d=>g(d,s)===u),v=Math.min(p,r),m=Math.max(p,r),k=a.items.slice(v,m+1).map(d=>g(d,s));i.value=k}return(o,s)=>{const n=E,u=F,b=O,p=G;return l(),x("div",B({ref_key:"rootRef",ref:C,class:["flex flex-wrap gap-4 relative",e.loading?"animate-pulse":""]},t(c).root),[e.items.length?I("",!0):(l(),V(n,{key:0,width:"100%",height:"100",color:e.color,class:"flex items-center justify-center"},{default:f(()=>[A(z(o.$t("noEntity",[o.$t("item",2)])),1)]),_:1},8,["color"])),(l(!0),x(N,null,j(t(w),(r,v)=>M(o.$slots,"item",{key:r[e.itemKey],size:t(h),index:v,columns:e.columns,color:e.color,bindings:t(c),item:r,onClick:m=>q(r,v,m)},()=>[K(n,B({width:t(h).width,height:t(h).height,class:"overflow-auto",color:e.color},t(c).card),{default:f(()=>[(l(!0),x(N,null,j(e.columns,(m,k)=>(l(),V(u,{key:k,class:"px-4 py-2"},{default:f(()=>[A(z(r[m.field]),1)]),_:2},1024))),128))]),_:2},1040,["width","height","color"])])),128)),M(o.$slots,"append-body",{size:t(h),columns:e.columns,items:e.items,color:e.color,bindings:t(c)}),t(w).length<e.items.length?(l(),V(n,B({key:1,width:"100%",class:"cursor-pointer hover:bg-b-secondary"},t(c).card,{onClick:s[0]||(s[0]=r=>t(S).page++)}),{default:f(()=>[K(p,{class:"items-center justify-center text-sm text-t-secondary"},{default:f(()=>[K(b,{name:"arrow-down",class:"mr-4"}),U("span",null,z(`${o.$t("loadMore")} (${t(w).length}/${e.items.length})`),1)]),_:1})]),_:1},16)):I("",!0)],16)}}});export{me as default};
