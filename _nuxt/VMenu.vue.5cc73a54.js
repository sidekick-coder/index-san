import{a as H,q as r,b as m,w as p,x as W,y as _,o as h,f as $,r as g,c as M,z as O,P as V,u as y,j as E,J as T,E as b,F as L}from"./entry.9864e5b4.js";import{u as N}from"./v-model.33915231.js";const P={inheritAttrs:!1},D=H({...P,__name:"VMenu",props:{modelValue:{type:Boolean,default:null},offsetY:{type:Boolean,default:!1},offsetX:{type:Boolean,default:!1},maxHeight:{type:String,default:null},closeOnContentClick:{type:Boolean,default:!1},openOnClick:{type:Boolean,default:!0},x:{type:Number,default:null},y:{type:Number,default:null}},emits:["update:modelValue"],setup(x,{emit:w}){const a=x,c=r(!1),u=N(a,"modelValue",w),o=m({get(){return u.value!==null?u.value:c.value},set(e){if(u.value!==null){u.value=e;return}c.value=e}});function f(){o.value=!o.value}function C(){a.openOnClick&&f()}const n=r({loading:!1,el:null,x:window.innerWidth,y:window.innerHeight-300});p(o,()=>{const e=n.value.el;!e||(n.value.loading=!0,setTimeout(()=>{n.value.y=window.innerHeight-e.clientHeight,n.value.x=window.innerWidth-e.clientWidth},100),setTimeout(()=>n.value.loading=!1,200))});const l=r({el:null,x:0,y:0,elWidth:0,elHeight:0});function k(){let{el:e}=l.value;if(!e||!e.getBoundingClientRect)return;const i=e.getBoundingClientRect();l.value.y=i.y,l.value.x=i.x,l.value.elWidth=e.clientWidth,l.value.elHeight=e.clientHeight}W(()=>setTimeout(k,500));function s(e){var t;if(!o.value)return;((t=n.value.el)==null?void 0:t.contains(e.target))||(o.value=!1),a.closeOnContentClick&&(o.value=!1)}p(o,e=>{if(e){setTimeout(()=>document.addEventListener("click",s),200);return}document.removeEventListener("click",s)}),_(()=>document.removeEventListener("click",s));const B=m(()=>{var d,v;let e=Math.min((d=a.y)!=null?d:l.value.y,n.value.y),i=Math.min((v=a.x)!=null?v:l.value.x,n.value.x);a.offsetY&&(e+=l.value.elHeight),a.offsetX&&(i-=l.value.elWidth);const t={top:`${e}px`,left:`${i}px`};return a.maxHeight&&(t["max-height"]=`${a.maxHeight}px`),l.value.el&&(t["min-width"]=`${l.value.el.clientWidth}px`),t});return(e,i)=>(h(),$(L,null,[g(e.$slots,"activator",{attrs:{onClick:C,ref:t=>l.value.el=t&&(t.$el||t)},toggle:f}),(h(),M(b,{to:"body"},[O(E("div",T({ref:t=>n.value.el=t,style:y(B),class:["v-menu z-20 fixed transition-all overflow-auto max-h-screen",n.value.loading?"opacity-0":"opacity-100"]},e.$attrs),[g(e.$slots,"default")],16),[[V,y(o)]])]))],64))}});export{D as _};
